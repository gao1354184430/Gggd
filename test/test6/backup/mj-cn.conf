#特殊版本，魔戒反代内网获取IP，其他tcp转发166**/266**
###查找替换内容###
#入口IP：172.16.0.44
#出口IP：172.16.0.58
#出口机器记得添加入口信任 set_real_ip_from   172.16.0.0/24; #内网
#
#
#    vim /etc/sysctl.conf
#    net.ipv4.ip_forward=0
#    修改成
#    net.ipv4.ip_forward=1
#其余iptables端口段转发下列规则去掉注释后就是ipatbles
#iptables -t nat -A PREROUTING -p tcp -m tcp --dport 10000:16600 -j DNAT --to-destination 172.16.0.58
#iptables -t nat -A PREROUTING -p udp -m udp --dport 10000:16600 -j DNAT --to-destination 172.16.0.58
#iptables -t nat -A POSTROUTING -d 172.16.0.58/32 -p tcp -m tcp --dport 10000:16600 -j SNAT --to-source 172.16.0.44
#iptables -t nat -A POSTROUTING -d 172.16.0.58/32 -p udp -m udp --dport 10000:16600 -j SNAT --to-source 172.16.0.44
#
#iptables -t nat -A PREROUTING -p tcp -m tcp --dport 16699:26600 -j DNAT --to-destination 172.16.0.58
#iptables -t nat -A PREROUTING -p udp -m udp --dport 16699:26600 -j DNAT --to-destination 172.16.0.58
#iptables -t nat -A POSTROUTING -d 172.16.0.58/32 -p tcp -m tcp --dport 16699:26600 -j SNAT --to-source 172.16.0.44
#iptables -t nat -A POSTROUTING -d 172.16.0.58/32 -p udp -m udp --dport 16699:26600 -j SNAT --to-source 172.16.0.44
#
#iptables -t nat -A PREROUTING -p tcp -m tcp --dport 26699:30000 -j DNAT --to-destination 172.16.0.58
#iptables -t nat -A PREROUTING -p udp -m udp --dport 26699:30000 -j DNAT --to-destination 172.16.0.58
#iptables -t nat -A POSTROUTING -d 172.16.0.58/32 -p tcp -m tcp --dport 26699:30000 -j SNAT --to-source 172.16.0.44
#iptables -t nat -A POSTROUTING -d 172.16.0.58/32 -p udp -m udp --dport 26699:30000 -j SNAT --to-source 172.16.0.44
#service iptables save
#魔戒端口监听
server {
    listen 16616;
    location / {
		proxy_pass http://172.16.0.58:16616;  
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 16617;
    location / {
		proxy_pass http://172.16.0.58:16617;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 16618;
    location / {
		proxy_pass http://172.16.0.58:16618;
		include /usr/local/nginx/ws; 
        }
	location /status { #监控页面
        check_status;
        access_log   off;
    }
}
server {
    listen 16619;
    location / {
		proxy_pass http://172.16.0.58:16619;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 16620;
    location / {
		proxy_pass http://172.16.0.58:16620;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 16621;
    location / {
		proxy_pass http://172.16.0.58:16621;
		include /usr/local/nginx/ws; 
        }
}  #16622是hkbn
server {
    listen 16622;
    location / {
		proxy_pass http://172.16.0.58:16622; #新HGC
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 16624;
    location / {
		proxy_pass http://172.16.0.58:16624;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 16625;
    location / {
		proxy_pass http://172.16.0.58:16625;  #魔戒俄罗斯
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 16626;
    location / {
		proxy_pass http://172.16.0.58:16626;  #魔戒印度
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 16627;
    location / {
		proxy_pass http://172.16.0.58:16627;  #魔戒AZHK落地
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 16628;
    location / {
		proxy_pass http://172.16.0.58:16628;  #魔戒阿根廷
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 16629;
    location / {
		proxy_pass http://172.16.0.58:16629;  #魔戒以色列
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 16630;
    location / {
		proxy_pass http://172.16.0.58:16630;  #魔戒土耳其
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 16631;
    location / {
		proxy_pass http://172.16.0.58:16631;  #HKT2
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 16632;
    location / {
		proxy_pass http://172.16.0.58:16632;  #US
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 16633;
    location / {
		proxy_pass http://172.16.0.58:16633;  #FDC-HK
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 16634;
    location / {
		proxy_pass http://172.16.0.58:16634;  #柬埔寨
		include /usr/local/nginx/ws; 
        }
}

server {
    listen 16635;
    location / {
		proxy_pass http://172.16.0.58:16635;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 16636;
    location / {
		proxy_pass http://172.16.0.58:16636;
		include /usr/local/nginx/ws; 
        }
}
#MJ嵌套区域-az
server {
    listen 26622;
    location / {
		proxy_pass http://172.16.0.58:26622;  #az到hgc_n
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 26633;
    location / {
		proxy_pass http://172.16.0.58:26633;  #az到FDC
		include /usr/local/nginx/ws; 
        }
}
#cv和fq-CV2节点
server {
    listen 26601;
    location / {
		proxy_pass http://172.16.0.58:26601;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 26602;
    location / {
		proxy_pass http://172.16.0.58:26602;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 26603;
    location / {
		proxy_pass http://172.16.0.58:26603;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 26604;
    location / {
		proxy_pass http://172.16.0.58:26604; #二次反代
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 26605;
    location / {
		proxy_pass http://172.16.0.58:26605; #CV2 HKT
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 26606;
    location / {
		proxy_pass http://172.16.0.58:26606; #美国圣何塞
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 26607;
    location / {
		proxy_pass http://172.16.0.58:26607;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 26608;
    location / {
		proxy_pass http://172.16.0.58:26608;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 26609; #香港 HKBN
    location / {
		proxy_pass http://172.16.0.58:26609;   
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 26610;
    location / {
		proxy_pass http://172.16.0.58:26610; 
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 26612; #香港
    location / {
		proxy_pass http://172.16.0.58:26612;   
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 26616; #香港 HGC
    location / {
		proxy_pass http://172.16.0.58:26616;   
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 26617; #俄罗斯
    location / {
		proxy_pass http://172.16.0.58:26617;   
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 26618; #德国
    location / {
		proxy_pass http://172.16.0.58:26618;   
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 26623;
    location / {
		proxy_pass http://172.16.0.58:26623; 
		include /usr/local/nginx/ws; 
        }
}