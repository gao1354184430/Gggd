#魔戒负载均衡dynamic_resolve fallback=stale fail_timeout=60s;
#dog开头为狗子节点177xx
#3go开头为胡三狗节点199xx
#fq开头为番茄
#cv开头为CV2
upstream tw{
        ip_hash;
		dynamic_resolve fallback=stale fail_timeout=60s;
        server tw.gkd.world:6616;
}
upstream 3gotw{
        ip_hash;	#动态tw
		dynamic_resolve fallback=stale fail_timeout=60s;
        server tw.gkd.world:19904;
}
upstream jp{
        ip_hash;
        server 54.250.244.180:6616 weight=6;
        server 18.183.137.49:6616 weight=5;
}
upstream dogjp{
        ip_hash;
        server 52.194.191.32:5515 weight=6;
        server 18.183.137.49:5515 weight=5;
}
upstream 3gojp{
        ip_hash;
        server 52.194.191.32:19900 weight=6;
        server 18.183.137.49:19900 weight=5;
}
upstream sg{
        ip_hash;
        server 13.229.133.73:6616 weight=6;
        #server 52.221.194.198:6616 weight=2;
}
upstream 3gosg{
        ip_hash;
        server 13.229.92.64:19902 weight=6;
        server 13.229.92.64:19902 weight=2;
}
upstream kr{
        ip_hash;	#vu+aws负载
        server 141.164.56.181:6616 weight=3;
        server 3.34.49.203:6616 weight=2;
}
upstream 3gokr{
        ip_hash;	#vu+aws负载
        #server 3.35.231.11:19901 weight=3;
        server 3.35.231.11:19901 weight=2;
}
upstream hk{
        ip_hash;	#AWSHK负载
		dynamic_resolve fallback=stale fail_timeout=60s;
	server 18.162.210.243:6616;
	server 18.166.209.216:6616;
}
upstream 3gohk{
        ip_hash;	#HGC
        server 210.0.158.197:19903;
}
upstream fq{
        ip_hash;	#动态tw
		dynamic_resolve fallback=stale fail_timeout=60s;
        server tw.gkd.world:7718;
}
upstream cv{
        ip_hash;	#动态tw
		dynamic_resolve fallback=stale fail_timeout=60s;
        server tw.gkd.world:5678;
}
server {
    listen 16616;
    location / {
		proxy_pass http://tw;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 16617;
    location / {
		proxy_pass http://jp;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 16618;
    location / {
		proxy_pass http://sg;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 16619;
    location / {
		proxy_pass http://kr;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 16620;
    location / {
		proxy_pass http://hk;
		include /usr/local/nginx/ws; 
        }
}
#狗子负载均衡（177xx段）
server {
    listen 17710;
    location / {
		proxy_pass http://dogjp;
		include /usr/local/nginx/ws; 
        }
}
#三狗负载（199xx段）
server {
    listen 19900;
    location / {
		proxy_pass http://3gojp;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 19901;
    location / {
		proxy_pass http://3gokr;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 19902;
    location / {
		proxy_pass http://3gosg;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 19903;
    location / {
		proxy_pass http://3gohk;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 19904;
    location / {
		proxy_pass http://3gotw;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 23330;
    location / {
		proxy_pass http://fq;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 10014;
    location / {
		proxy_pass http://fq;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 10033;
    location / {
		proxy_pass http://fq;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 23359;
    location / {
		proxy_pass http://fq;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 23324;
    location / {
		proxy_pass http://cv;
		include /usr/local/nginx/ws; 
        }
}
server {
    listen 26607;
    location / {
		proxy_pass http://cv;
		include /usr/local/nginx/ws; 
        }
}
